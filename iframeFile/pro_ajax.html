<!doctype html><html lang="en"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="author" content="XIONGBAB"/><meta name="description" content="MyLifeMemory"/><meta name="keywords" content="XIONGBAB,MyLifeMemory,"/><meta http-equiv="Pragma" content="no-cache"/><meta http-equiv="Window-target" content="_top"/><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/><link id="icon-link" rel="Shortcut Icon" href=""/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-okaidia.min.css"/><title>pro_ajax</title><script defer="defer" src="../static/js/runtime~iframeJs.38887298.js"></script><script defer="defer" src="../static/js/489.0788b82d.js"></script><script defer="defer" src="../static/js/iframeJs.f167e449.js"></script><link href="../static/css/iframeJs.98885fb8.css" rel="stylesheet"></head><body><div class="container"><div class="centerBox"><div class="tipContent"><span class="tipBtn">重要提示</span><div class="tipText"><em>1、在任何开发下（代码 /单词 / 正规写法，都不能写错，写错了检查起来会头痛）</em> <em>2、颜色分类：文本 <i>黑色</i> 、重点 <i>红色</i> 、注释 <i>绿色</i> 、特殊 <i>棕色</i> 、首行缩进两个字符、链接默认蓝色 </em><em>3、字符默认大小16px，重点20px，标题24px，特殊28px，最小为14px</em></div></div><div class="tagContent"><span class="tipBtn">文本内容</span><h3>一、AJAX （Asynchronous javaScript and xml : 异步 js 和 xml）</h3><ul><li>异步: 指的是并行执行</li><li>同步: 指的是按顺序从上往下执行</li><li>ajax 的好处，可以在不刷新页面的时候，完成数据加载，产生局部刷新的效果，提高用户体验度</li><li>最初使用xml标签存储数据，现在绝大部分用JSON格式的字符串<ul class="noList"><li class="codeListContainer"><div class="preBox"><span class="preSpan">Html</span> <button class="preButton">Copy&nbsp;code</button><pre><code class="language-html">  &lt;!-- a.JSON文件 --&gt;
  {
      "name": "张三",
      "age": 20,
      "gender": "男"
  }

  &lt;!-- html文件 --&gt;
  &lt;head&gt;
      &lt;style&gt;
          div {width: 400px; height: 400px; border: 1px solid black;}
      &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
      &lt;button id="btn"&gt;获取数据&lt;/button&gt;
      &lt;div&gt;&lt;/div&gt;
      &lt;script&gt;
          btn.onclick = function () {                 // 不获取 js 也会通过ID 找到标签，正常情况下还是写上
              let xhr = new XMLHttpRequest();         // 1、创建xhr对象 （原生ajax对象）
              xhr.open('GET', './a.json')             // 2、初始化请求（GET / POST）,第一个参数是请求方式，地址文件是服务器地址，演示用的是本地文件
              xhr.send();                             // 3、发送请求
              xhr.onreadystatechange = function () {  // 4、监听读取状态改变事件
                  
                  // 请求已经完成, readyState是读取状态： 
                  // 0：请求未初始化  1：服务器连接已建立  2：请求已接收  3：请求处理中  4：请求已完成，且响应已就绪
                  if (xhr.readyState === 4) {
                      if (xhr.status === 200) {       // status是响应的状态码，常见的：200(成功) 404(请求资源错误) 500(服务器端错误)
                          // xhr.responseText 返回响应体，它是一个JSON格式的字符串
                          // let data = xhr.responseText;
                          // 我们需要将字符串转换为js 对象
                          let data = JSON.parse(xhr.responseText);
                          let p1 = document.createElement("p");
                          let p2 = document.createElement("p");
                          let p3 = document.createElement("p");
                          let div = document.querySelector('div');
                          p1.innerHTML = data.name;
                          p2.innerHTML = data.age;
                          p3.innerHTML = data.gender;
                          div.appendChild(p1);
                          div.appendChild(p2);
                          div.appendChild(p3);
          } } } }
      &lt;/script&gt; </code></pre></div></li></ul></li><li>AJAX步骤：总共4步<ul class="noList"><li class="codeListContainer"><div class="preBox"><span class="preSpan">Javascript</span> <button class="preButton">Copy&nbsp;code</button><pre><code class="language-javascript">  let xhr = new XMLHttpRequest(); // 1、创建xhr对象 （原生ajax对象）
  // 2.1初始化请求（GET/POST）一参是请求方式，二参是服务器地址，演示用的是本地文件
  // 2.2Get 请求方式的参数，直接拼接在url里面 ，?后面内容是请求参数，多个参数用&分割
  xhr.open('GET', './a.json?loginId='+loginId+'&loginPwd='+loginPwd) 
  xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')
  xhr.send(loginId=abc&Pwd=abc);          // 3、发送请求  post方式需要通过send（）方法传递，GET是url
  xhr.onreadystatechange = function () {  // 4、监听读取状态改变事件
      if (xhr.readyState === 4) {         // 判断是否请求完成
          if (xhr.status === 200) {       // 判断请求是否成功
              // 如果成功，执行代码
  } } }</code></pre></div></li></ul></li><li>JSON<ul><li>可以存储对象<pre><code class="language-javascript">  {
      "name": "张三", "age": 20, "gender": "男"
  }</code></pre></li><li>也可以存储数组中对象，数组的话可以使用数组的方法<pre><code class="language-javascript">  [
      {
          "name": "张三", "age": 20, "gender": "男"
      },
      {
          "name": "李四", "age": 30, "gender": "女"
      }
  ]</code></pre></li></ul></li></ul><h3>二、GET 和 POST 区别 全大写</h3><ul><li>xhr.open('GET', './a.json? loginId='+loginId+'&loginPwd='+loginPwd)</li><li>GET 传参是拼接在URL里</li><li>? 后面跟参数， 使用 & 符号拼接参数</li><li>参数数据的上限是4MB（M = MB）， 假如需要上传音乐或者小视频，那么GET就不够用</li><li>且数据不安全，会以明文方式出现在URL上</li><li><i class="redTag">行内规范：一般只会请求数据，不会发送数据</i></li></ul><ul><li>xhr.send(loginId=abc&Pwd=abc);</li><li>POST 是将数据放在 send() 里 &拼接参数</li><li>默认传参方式是text 文本类型 ，在发送前需要设置请求头里的属性，Content-Type 百度查询类型<ul class="noList"><li class="codeListContainer"><div class="preBox"><span class="preSpan">Javascript</span> <button class="preButton">Copy&nbsp;code</button><pre><code class="language-javascript">  xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
  xhr.send(loginId=abc&Pwd=abc);

  // 类型为json时的写法
  xhr.setRequestHeader('Content-Type','application/json');
  xhr.send(`{"name":"张三","age":20,"gender":"男"}`);</code></pre></div></li></ul></li></ul></div></div><div class="footerBox"></div></div><div id="goTop"></div></body><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.27.0/prism.min.js"></script><script>document.addEventListener("DOMContentLoaded", function (event) {
            Prism.highlightAll();
        });</script></html>